<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>

<link rel="stylesheet" type="text/css" href="https://viresh-ratnakar.github.io/exolve-m.css?v0.93"/>
<script src="https://viresh-ratnakar.github.io/exolve-m.js?v0.93"></script>

<title>Chain Letters</title>

<script>

function toggleChainLetter(puz, e) {
  if (e && e.key && e.key != '#') {
    return
  }
  e.stopPropagation()
  let gridCell = puz.currCell()
  if (!gridCell || !gridCell.isLight) {
    puz.refocus()
    return
  }
  let row = puz.currRow
  let col = puz.currCol
  if (!gridCell.chainRect) {
    gridCell.chainRect = gridCell.cellRect.cloneNode()
    gridCell.chainRect.addEventListener('click', puz.cellActivator.bind(puz, row, col));
    gridCell.chainRect.style.fill = 'transparent'
    puz.svg.appendChild(gridCell.chainRect)
  }
  if (gridCell.chainRect.style.fill == 'transparent') {
    gridCell.chainRect.style.fill = 'rgba(0,0,255,0.2)'
  } else {
    gridCell.chainRect.style.fill = 'transparent'
  }
  puz.refocus()
}

function customizeExolve(puz) {
  let customStyles = document.createElement('style')
  customStyles.innerHTML = `
    #${puz.prefix}-frame #toggle-chain-letter {
      background-color: transparent;
      box-shadow: inset 0px 0px 0px 4px #4caf50;
      box-sizing: border-box;
    }
    #${puz.prefix}-frame #toggle-chain-letter:hover {
      background-color: palegreen;
    }
  `;
  document.body.appendChild(customStyles);

  puz.gridInput.addEventListener('keydown', toggleChainLetter.bind(null, puz));
  let b = document.createElement('button')
  b.className = 'xlv-button'
  b.style.float = 'right'
  b.id = 'toggle-chain-letter'
  b.innerHTML = '&#128279;'
  b.title = 'Click to mark/unmark chain letter. Keyboard shortcut: type # in a cell.'
  b.addEventListener('click', toggleChainLetter.bind(null, puz));
  document.getElementById(`${puz.prefix}-button-row-1`).appendChild(b)
}

const puzzleText = `
======REPLACE WITH YOUR PUZZLE BELOW======
  exolve-begin
  exolve-width: 15
  exolve-height: 15
  exolve-preamble:
    <p>
    Upon receiving and solving this puzzle, you must read the chain letters.
    The only chains that count are the substantial ones—ignore any chains
    that are shorter than length three. You must then proceed to join all the
    chain letters to compose your own final letter! If you fail to do this, then
    the &#9673;&#9673;&#9673;&#9673;* god M will be endlessly unfulfilled.
    </p>
    <p>
    You may want to keep track of your chain letters by marking/unmarking them
    using the &#128279; button (or by using the keyboard shortcut, [#]). This
    will help you when you compose your final letter.
    </p>
  exolve-question: What's the final letter that you composed? (30)*
  exolve-question: &#9673;&#9673;&#9673;&#9673;* god M: (30)*
  # exolve-question: Your name or arbitrary pseudonym: (30)* [lowercase-ok]
  # exolve-question: Comments and feedback (these may get shown in the announced results): (400)* [lowercase-ok]
  # exolve-submit: https://docs.google.com/forms/d/e/1FAIpQLScRWcRGowjwe7_pMXCItGXTiyi2mgmNfMzr8DOmcWzwUKR4BA/formResponse?submit=SUBMIT entry.1935561980 entry.21114399 entry.1745446663 entry.1969921185 entry.1043462600

  exolve-id: ribelle-gussalufz-1
  exolve-title: Chain Letters
  exolve-setter: Ribelle & Gussalufz
  exolve-copyright: 2020 Faten Ismail, Viresh Ratnakar
  exolve-grid: 
    .   .   0   .   0   .   0   .   0@  .   0   .   0   .   .   
    0   0   0   0   0   0   0   .   0   0   0   0   0   0   0   
    0   .   0   .   0   .   0   .   0   .   0   .   0   .   0   
    0   0   0   0   0   .   0   0   0   0   0   0   0   0   0   
    0   .   0   .   0   .   .   .   0   .   0   .   0   .   0   
    0@  0   0   0   0   0   0   0   .   0   0   0   0   0   0   
    0   .   .   .   0   .   0   .   0   .   0   .   0   .   .   
    0   0   0   0   .   0   0   0   0   0   .   0   0   0   0   
    .   .   0   .   0   .   0   .   0   .   0@  .   .   .   0   
    0@  0   0   0   0   0   .   0   0   0   0   0   0   0   0   
    0   .   0   .   0   .   0   .   .   .   0   .   0   .   0   
    0   0   0   0   0   0   0   0   0   .   0   0   0   0   0   
    0   .   0   .   0   .   0   .   0   .   0   .   0   .   0   
    0   0   0   0   0   0   0   .   0   0   0   0   0   0   0   
    .   .   0   .   0   .   0   .   0   .   0   .   0   .   .   
  exolve-across: 
  7 Love African dancing while striking loud musical instrument (7)
  8 Scoring 0/1, a bright former student (7)
  10 Quote from the East about husband's code of conduct (5)
  11 Criticism of wife-to-be over imperfect dosa (9)
  12 What artists draw? (8)
  14 Sick queen gets comfortable (6)
  16 Aggressive man left, not at home (4)
  18 A small boat, regularly used? OK, easy task (5)
  19 Doctor has new way to release anger (4)
  23 Relative peace seen finally returning; I am relieved! (6)
  24 Spooner says: follow close for a quicker route (8)
  27 Not a price that is abnormal for an activity one might enjoy after approaching 18 (5,4)
  29 Loud volcano eruption releasing nitric oxide gas (5)
  30 A bitter alkaloid concoction of neem—it packs energy (7)
  31 Ex nobleman, that is right (7)
  exolve-down: 
  1 Struck deal upon return to hold silence (6)
  2 Know about desire to be where the food is (7)
  3 Post box at the entrance to boulevard (4)
  4 No container returned to this country (5)
  5 Hospital suitable for children, with mother going over doctor's routine (7)
  6 It ain't me playing around, dear (8)
  7 On average, cycling partner covers one length (7)
  9 Look at display discontentedly:  "poorly maintained" (5)
  13 Reportedly uses cocaine to entice (4)
  15 Way essential to stop a thief (4)
  17 "No pun intended!" Stormy noted, "This got rid of some weight that was bearing down." (8)
  20 Ceremonial ritual changed to save time (7)
  21 Setter overwhelmed by prize: castle in Spain! (7)
  22 Show king and bishop saw (7)
  23 Fun left out of otherwise fine lunch recess (5)
  25 Some fancy clickbait recurring periodically (6)
  26 A cheese strong and crisp (5)
  28 Request to gather shortly (4)
  exolve-end
  
======REPLACE WITH YOUR PUZZLE ABOVE======
`;

</script>

</head>

<body onload="createPuzzle()">
</body>

</html>
